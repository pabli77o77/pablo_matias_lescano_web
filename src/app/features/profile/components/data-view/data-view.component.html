<div class="data-view-wrapper">
  
  <!-- TABS NAVIGATION (Pills System) -->
  <div class="flex flex-wrap gap-6 mt-8 mb-10">
    <button (click)="setTab('all')" 
            class="px-6 py-2 rounded-full text-sm font-medium tracking-wide transition-all duration-300 border"
            [ngClass]="activeTab() === 'all' 
              ? 'bg-blue-500/10 text-blue-400 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]' 
              : 'border-slate-700 bg-slate-800/50 text-slate-400 hover:text-white hover:border-slate-500'">
      {{ currentLang() === 'es' ? 'Todo' : 'All' }}
    </button>
    
    <button (click)="setTab('frontend')" 
            class="px-6 py-2 rounded-full text-sm font-medium tracking-wide transition-all duration-300 border"
            [ngClass]="activeTab() === 'frontend' 
              ? 'bg-blue-500/10 text-blue-400 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]' 
              : 'border-slate-700 bg-slate-800/50 text-slate-400 hover:text-white hover:border-slate-500'">
      Frontend & App
    </button>
    
    <button (click)="setTab('data')" 
            class="px-6 py-2 rounded-full text-sm font-medium tracking-wide transition-all duration-300 border"
            [ngClass]="activeTab() === 'data' 
              ? 'bg-blue-500/10 text-blue-400 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]' 
              : 'border-slate-700 bg-slate-800/50 text-slate-400 hover:text-white hover:border-slate-500'">
      Cloud & Data
    </button>
  </div>

  <div class="snippets-container">
    <!-- 1. JSON PROFILE (GENERAL) - Visible solo en pesta√±a 'All' para reducir altura -->
    @if (activeTab() === 'all') {
      <div class="code-window header-window fade-in">
        <div class="window-header clickable" (click)="toggleSection('json-profile')">
          <div class="header-left">
            <span class="toggle-icon">{{ expandedSection() === 'json-profile' ? '‚ñº' : '‚ñ∂' }}</span>
            <span class="file-icon json">‚öôÔ∏è</span>
            <span class="file-name">pablo_lescano_profile.json</span>
            <span class="tag-badge badge-config">CONFIG</span>
          </div>
          <div class="lang">JSON</div>
        </div>
        
        @if (expandedSection() === 'json-profile') {
          <div class="window-body fade-in">
            <!-- ARCHITECT NOTE -->
            <div class="architect-note-container">
              <div class="note-header">
                <div class="header-left">
                  <span class="note-icon">‚ö°</span>
                  <span>{{ ui().noteLabel }}</span>
                </div>
                <button (click)="copyConcept(jsonProfileDescription())" class="copy-concept-btn" [class.copied]="copyState() === 'copied'">
                  <span>{{ copyState() === 'copied' ? ui().copied : ui().copy }}</span>
                </button>
              </div>
              <blockquote class="note-content">
                "{{ jsonProfileDescription() }}"
              </blockquote>
            </div>
            <pre><code>{{ formattedData() }}</code></pre>
          </div>
        }
      </div>
    }

    <!-- 2. FILTERED SNIPPETS LIST -->
    <div class="snippets-list">
      @for (snippet of filteredSnippets(); track snippet.id) {
        <div class="code-window fade-in">
          <div class="window-header clickable" (click)="toggleSection(snippet.id)">
            <div class="header-left">
              <span class="toggle-icon">{{ expandedSection() === snippet.id ? '‚ñº' : '‚ñ∂' }}</span>
              <span class="file-icon code">üìÑ</span>
              <span class="file-name">{{ snippet.title }}</span>
              <span class="tag-badge" [ngClass]="getTagClass(snippet.tag)">{{ snippet.tag }}</span>
            </div>
            <div class="lang">{{ snippet.language | uppercase }}</div>
          </div>
          
          @if (expandedSection() === snippet.id) {
            <div class="window-body fade-in">
              <div class="architect-note-container">
                <div class="note-header">
                  <div class="header-left">
                    <span class="note-icon">‚ö°</span>
                    <span>{{ ui().noteLabel }}</span>
                  </div>
                  <button (click)="copyConcept(getDescription(snippet))" class="copy-concept-btn" [class.copied]="copyState() === 'copied'">
                    <span>{{ copyState() === 'copied' ? ui().copied : ui().copy }}</span>
                  </button>
                </div>
                <blockquote class="note-content" [innerHTML]="'&quot;' + getDescription(snippet) + '&quot;'"></blockquote>
              </div>
              <pre><code>{{ snippet.code }}</code></pre>
            </div>
          }
        </div>
      }
    </div>
  </div>
</div>
